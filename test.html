<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GAS 接続テスト</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", sans-serif; padding: 16px; }
    h1 { margin: 0 0 12px; }
    .box { border: 1px solid #ddd; padding: 12px; border-radius: 10px; margin-top: 12px; }
    code { word-break: break-all; }
    pre { background: #f7f7f7; padding: 12px; border-radius: 10px; overflow: auto; }
  </style>
</head>
<body>

<h1>GitHub → GAS テスト</h1>
<p>※ GET で叩いて CORS（プリフライト）を回避します</p>

<div class="box">
  <div><b>REQUEST URL:</b></div>
  <code id="req"></code>
</div>

<div class="box">
  <div><b>RESPONSE JSON:</b></div>
  <pre id="out">loading...</pre>
</div>

<script>
  // ★ここだけあなたの最新URLにする（/exec）
  const GAS_URL = "https://script.google.com/macros/s/AKfycbzd5Vge6C_jaNrYV0ZegeQuhXPSQNr27sb4NtmfTDvocJ8T7qmBqE43YKsNBXQ8Dj2mEg/exec";

  const params = new URLSearchParams({
    action: "calc",
    distanceKm: "10",
    minutes: "30",
    _ts: String(Date.now())
  });

  const url = `${GAS_URL}?${params.toString()}`;
  document.getElementById("req").textContent = url;

  fetch(url)
    .then(r => r.json())
    .then(d => {
      document.getElementById("out").textContent = JSON.stringify(d, null, 2);
    })
    .catch(err => {
      document.getElementById("out").textContent = "NG\n" + String(err);
    });
</script>

</body>
</html>
